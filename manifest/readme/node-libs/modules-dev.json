{"name":"modules-dev","summary":"<p>modules-dev 是一个强大的组件开发辅助工具，为你的远程组件或前端库项目提供完整的开发环境。无论是实时预览组件示例，还是生成可集成到文档系统的代码，modules-dev 都能轻松应对。</p>\n<h3>核心特性</h3>\n<ul>\n<li><strong>零配置开箱即用</strong>：基于 Craco 封装的构建插件，支持远程组件和组件库两种场景</li>\n<li><strong>实时预览</strong>：开发环境支持组件示例的实时预览，所见即所得</li>\n<li><strong>文档自动生成</strong>：自动解析 <code>doc/</code> 目录下的文档和示例代码</li>\n<li><strong>命令行工具</strong>：提供 <code>modules-dev-create</code> 和 <code>modules-dev-libs-init</code> 快速创建组件目录结构</li>\n<li><strong>模块联邦支持</strong>：内置 Webpack Module Federation 支持，方便远程组件开发</li>\n<li><strong>灵活的路径配置</strong>：通过环境变量自定义组件目录和别名</li>\n</ul>\n<h3>应用场景</h3>\n<ol>\n<li><strong>远程组件开发</strong>：在开发远程组件时提供实时预览环境，组件发布后可集成到 kne-union 文档系统</li>\n<li><strong>组件库开发</strong>：为前端组件库提供统一的示例展示和文档生成能力</li>\n<li><strong>业务项目调试</strong>：在开发模式下集成示例预览，快速验证组件功能</li>\n</ol>\n<h3>构建工具使用</h3>\n<h4>远程组件项目</h4>\n<p>在项目的 <code>craco.config.js</code> 中配置 CracoRemoteComponentsPlugin：</p>\n<pre><code class=\"language-js\">const {CracoRemoteComponentsPlugin} = require(\"@kne/modules-dev\");\n\nmodule.exports = {\n    plugins: [{\n        plugin: CracoRemoteComponentsPlugin\n    }]\n};\n</code></pre>\n<h4>组件库项目</h4>\n<p>在示例目录的 <code>example/craco.config.js</code> 中配置 CracoLibsExamplePlugin：</p>\n<pre><code class=\"language-js\">const {CracoLibsExamplePlugin} = require(\"@kne/modules-dev\");\n\nmodule.exports = {\n    plugins: [{\n        plugin: CracoLibsExamplePlugin\n    }]\n};\n</code></pre>\n<h3>Example 组件使用</h3>\n<h4>远程组件库项目</h4>\n<pre><code class=\"language-jsx\">import createEntry from \"@kne/modules-dev/dist/create-entry\";\nimport \"@kne/modules-dev/dist/create-entry.css\";\nimport readme from \"readme\";\n\nconst ExampleRoutes = createEntry.ExampleRoutes;\n\nconst App = ({preset, themeToken, ...props}) =&gt; {\n    return (&lt;HashRouter&gt;\n        &lt;ExampleRoutes\n            {...props}\n            paths={[{\n                key: \"components\", path: \"/\", title: \"首页\",\n            },]}\n            preset={preset}\n            themeToken={themeToken}\n            readme={readme}\n        /&gt;\n    &lt;/HashRouter&gt;);\n};\n</code></pre>\n<h4>业务项目集成开发模式</h4>\n<pre><code class=\"language-jsx\">if (process.env.NODE_ENV === 'development') {\n    import('@kne/modules-dev/dist/create-entry.css');\n    import('@kne/modules-dev/dist/create-entry').then(module =&gt; {\n        const Entry = module.default(App);\n        root.render(&lt;Entry preset={globalPreset} projectName=\"erc\" themeToken={globalPreset.themeToken}/&gt;);\n    });\n} else {\n    root.render(\n        &lt;BrowserRouter&gt;\n            &lt;App/&gt;\n        &lt;/BrowserRouter&gt;\n    );\n}\n</code></pre>\n<h3>命令行工具</h3>\n<ul>\n<li><code>modules-dev-create</code>：在远程组件项目中创建新的组件目录结构和文档模板</li>\n<li><code>modules-dev-libs-init</code>：为前端库项目初始化示例开发环境</li>\n</ul>\n<h3>环境变量配置</h3>\n<table>\n<thead>\n<tr>\n<th>变量名</th>\n<th>说明</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>MODULES_DEV_BASE_DIR</td>\n<td>组件基础目录</td>\n<td>./src/components</td>\n</tr>\n<tr>\n<td>MODULES_DEV_ALIAS_NAME</td>\n<td>组件别名</td>\n<td>@components</td>\n</tr>\n<tr>\n<td>MODULES_DEV_STATIC_BASE_URL</td>\n<td>静态资源基础路径</td>\n<td>/ui_components</td>\n</tr>\n<tr>\n<td>MODULES_DEV_PUBLIC_URL</td>\n<td>公共 URL</td>\n<td>自动生成</td>\n</tr>\n<tr>\n<td>CURRENT_VERSION</td>\n<td>当前版本</td>\n<td>从 package.json 读取</td>\n</tr>\n<tr>\n<td>OPEN_CURRENT_VERSION</td>\n<td>是否在 URL 中显示版本号</td>\n<td>true</td>\n</tr>\n</tbody>\n</table>","api":"<pre><code class=\"language-js\">const {CracoRemoteComponentsPlugin, CracoLibsExamplePlugin, env} = require('@kne/modules-dev');\n</code></pre>\n<h3>CracoRemoteComponentsPlugin</h3>\n<p>用于远程组件项目的 Craco 插件，自动配置文档解析、模块联邦和 CSS Modules 支持。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>middleware</td>\n<td>中间件配置</td>\n<td>object</td>\n<td>undefined</td>\n</tr>\n</tbody>\n</table>\n<h3>CracoLibsExamplePlugin</h3>\n<p>用于组件库示例项目的 Craco 插件，自动配置文档解析、版本管理和模块联邦支持。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>middleware</td>\n<td>中间件配置</td>\n<td>object</td>\n<td>undefined</td>\n</tr>\n</tbody>\n</table>\n<h3>env</h3>\n<p>环境变量配置对象，提供项目构建所需的各种路径和配置信息。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>appDir</td>\n<td>应用根目录</td>\n<td>string</td>\n</tr>\n<tr>\n<td>manifestPath</td>\n<td>manifest 文件路径</td>\n<td>string</td>\n</tr>\n<tr>\n<td>staticBaseUrl</td>\n<td>静态资源基础 URL</td>\n<td>string</td>\n</tr>\n<tr>\n<td>moduleBasePath</td>\n<td>组件基础路径</td>\n<td>string</td>\n</tr>\n<tr>\n<td>moduleBaseDir</td>\n<td>组件基础目录（绝对路径）</td>\n<td>string</td>\n</tr>\n<tr>\n<td>moduleAliasName</td>\n<td>组件别名名称</td>\n<td>string</td>\n</tr>\n<tr>\n<td>templateDir</td>\n<td>模板目录</td>\n<td>string</td>\n</tr>\n<tr>\n<td>templateLibsExampleDir</td>\n<td>组件库示例模板目录</td>\n<td>string</td>\n</tr>\n<tr>\n<td>componentsName</td>\n<td>组件名称</td>\n<td>string</td>\n</tr>\n<tr>\n<td>openComponentsVersion</td>\n<td>是否在 URL 中显示版本号</td>\n<td>boolean</td>\n</tr>\n<tr>\n<td>componentsVersion</td>\n<td>组件版本号</td>\n<td>string</td>\n</tr>\n<tr>\n<td>publicUrl</td>\n<td>公共 URL</td>\n<td>string</td>\n</tr>\n</tbody>\n</table>\n<pre><code class=\"language-js\">import createEntry from '@kne/modules-dev/dist/create-entry';\n\nconst Entry = createEntry(children);\n</code></pre>\n<h3>createEntry</h3>\n<p>高阶组件工厂函数，用于包装业务组件，集成开发环境的文档预览功能。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>children</td>\n<td>要包装的业务组件</td>\n<td>ReactComponent</td>\n<td>-</td>\n</tr>\n<tr>\n<td>preset</td>\n<td>全局预设配置</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>projectName</td>\n<td>项目名称</td>\n<td>string</td>\n<td>-</td>\n</tr>\n<tr>\n<td>themeToken</td>\n<td>主题配置</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>pageProps</td>\n<td>页面属性</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>baseUrl</td>\n<td>基础路径</td>\n<td>string</td>\n<td>''</td>\n</tr>\n</tbody>\n</table>\n<h3>createEntry.ExampleRoutes</h3>\n<p>示例路由组件，用于渲染组件示例页面。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>readme</td>\n<td>组件 README 数据</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>paths</td>\n<td>路径配置列表</td>\n<td>array</td>\n<td>-</td>\n</tr>\n<tr>\n<td>preset</td>\n<td>全局预设配置</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>themeToken</td>\n<td>主题配置</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>baseUrl</td>\n<td>基础路径</td>\n<td>string</td>\n<td>''</td>\n</tr>\n<tr>\n<td>projectName</td>\n<td>项目名称</td>\n<td>string</td>\n<td>-</td>\n</tr>\n<tr>\n<td>pageProps</td>\n<td>页面属性</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>children</td>\n<td>子路由内容</td>\n<td>ReactNode</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n<h3>createEntry.Example</h3>\n<p>单个组件示例展示组件。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>baseUrl</td>\n<td>基础路径</td>\n<td>string</td>\n<td>-</td>\n</tr>\n<tr>\n<td>readme</td>\n<td>组件 README 数据</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>pageProps</td>\n<td>页面属性</td>\n<td>object</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n<h3>createEntry.ExamplePage</h3>\n<p>示例页面组件，用于展示组件文档和代码示例。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>data</td>\n<td>组件数据</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>current</td>\n<td>当前组件 ID</td>\n<td>string</td>\n<td>-</td>\n</tr>\n<tr>\n<td>items</td>\n<td>组件列表</td>\n<td>array</td>\n<td>-</td>\n</tr>\n<tr>\n<td>pageProps</td>\n<td>页面属性</td>\n<td>object</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n<h3>createEntry.ExampleContent</h3>\n<p>示例内容组件，渲染组件的描述、概述、代码示例和 API 文档。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>data</td>\n<td>组件数据</td>\n<td>object</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n<pre><code class=\"language-js\">import {FontList} from '@kne/modules-dev/dist/index';\n</code></pre>\n<h3>FontList</h3>\n<p>图标字体列表展示组件，用于预览和复制图标代码。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>fonts</td>\n<td>图标字体数据</td>\n<td>object</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n<pre><code class=\"language-js\">import {Example} from '@kne/modules-dev/dist/index';\n</code></pre>\n<h3>Example</h3>\n<p>组件示例展示组件（别名，同 createEntry.Example）。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>baseUrl</td>\n<td>基础路径</td>\n<td>string</td>\n<td>-</td>\n</tr>\n<tr>\n<td>readme</td>\n<td>组件 README 数据</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>pageProps</td>\n<td>页面属性</td>\n<td>object</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n<pre><code class=\"language-js\">import {ExamplePage} from '@kne/modules-dev/dist/index';\n</code></pre>\n<h3>ExamplePage</h3>\n<p>示例页面组件（别名，同 createEntry.ExamplePage）。</p>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>data</td>\n<td>组件数据</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>current</td>\n<td>当前组件 ID</td>\n<td>string</td>\n<td>-</td>\n</tr>\n<tr>\n<td>items</td>\n<td>组件列表</td>\n<td>array</td>\n<td>-</td>\n</tr>\n<tr>\n<td>pageProps</td>\n<td>页面属性</td>\n<td>object</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>","example":{"isFull":false,"className":"modules_dev_4d41b","style":"","list":[{"title":"基础用法","description":"展示 createEntry 的基本使用方式，包装业务组件并集成开发环境功能","scope":[{"name":"_ModulesDev","packageName":"@kne/modules-dev","importStatement":"import * as _ModulesDev from \"@kne/modules-dev\""},{"name":"remoteLoader","packageName":"@kne/remote-loader"},{"name":"antd","packageName":"antd"}],"code":"const { createEntry, ExampleRoutes } = _ModulesDev;\nconst { createWithRemoteLoader, getPublicPath } = remoteLoader;\nconst { Card, Typography, Space } = antd;\nconst { useState } = React;\n\nconst BaseExample = createWithRemoteLoader({\n  modules: ['components-core:Global@PureGlobal', 'components-core:InfoPage']\n})(({ remoteModules }) => {\n  const [PureGlobal, InfoPage] = remoteModules;\n  const [wrapped, setWrapped] = useState(true);\n\n  const MockComponent = () => (\n    <Card title=\"业务组件\" style={{ maxWidth: 400 }}>\n      <Typography.Paragraph>这是一个模拟的业务组件内容</Typography.Paragraph>\n    </Card>\n  );\n\n  const WrappedComponent = createEntry(MockComponent);\n\n  return (\n    <PureGlobal preset={{\n      ajax: async api => {\n        return { data: { code: 0, data: api.loader() } };\n      },\n      apis: {\n        example: {\n          staticUrl: getPublicPath('modules-dev') || window.PUBLIC_URL,\n          getUrl: {\n            loader: async ({ params }) => {\n              return 'mock-data';\n            }\n          }\n        }\n      }\n    }}>\n      <InfoPage>\n        <InfoPage.Part title=\"基础用法\">\n          <Space direction=\"vertical\" size=\"large\" style={{ width: '100%' }}>\n            <Typography.Title level={3}>createEntry 高阶组件</Typography.Title>\n            <Typography.Paragraph>\n              createEntry 是一个高阶组件工厂函数，用于包装业务组件，\n              集成开发环境的文档预览功能。当存在组件 README 数据时，\n              会自动显示组件导航和示例页面。\n            </Typography.Paragraph>\n            <Card title=\"控制面板\">\n              <Space>\n                <Typography.Text>启用包装:</Typography.Text>\n                <Typography.Switch checked={wrapped} onChange={setWrapped} />\n              </Space>\n            </Card>\n            <div style={{ padding: 20, background: '#f5f5f5', borderRadius: 8 }}>\n              {wrapped ? <WrappedComponent /> : <MockComponent />}\n            </div>\n          </Space>\n        </InfoPage.Part>\n      </InfoPage>\n    </PureGlobal>\n  );\n});\n\nrender(<BaseExample />);\n\n"},{"title":"FontList 图标列表","description":"使用 FontList 组件展示和预览图标字体","scope":[{"name":"_ModulesDev","packageName":"@kne/modules-dev","importStatement":"import * as _ModulesDev from \"@kne/modules-dev\""},{"name":"remoteLoader","packageName":"@kne/remote-loader"},{"name":"antd","packageName":"antd"}],"code":"const { FontList } = _ModulesDev;\nconst { createWithRemoteLoader, getPublicPath } = remoteLoader;\nconst { Space, Typography, Card } = antd;\n\nconst FontListExample = createWithRemoteLoader({\n  modules: ['components-core:Global@PureGlobal', 'components-core:InfoPage']\n})(({ remoteModules }) => {\n  const [PureGlobal, InfoPage] = remoteModules;\n\n  return (\n    <PureGlobal preset={{\n      ajax: async api => {\n        return { data: { code: 0, data: api.loader() } };\n      },\n      apis: {\n        example: {\n          staticUrl: getPublicPath('modules-dev') || window.PUBLIC_URL,\n          getUrl: {\n            loader: async ({ params }) => {\n              return {\n                'kne-font': {\n                  glyphs: [\n                    { font_class: 'icon-home' },\n                    { font_class: 'icon-user' },\n                    { font_class: 'icon-setting' },\n                    { font_class: 'icon-delete' },\n                    { font_class: 'icon-edit' },\n                    { font_class: 'icon-add' }\n                  ]\n                },\n                'kne-font-colorful': {\n                  glyphs: [\n                    { font_class: 'icon-star' },\n                    { font_class: 'icon-heart' },\n                    { font_class: 'icon-check' }\n                  ]\n                }\n              };\n            }\n          }\n        }\n      }\n    }}>\n      <InfoPage>\n        <InfoPage.Part title=\"FontList 图标列表\">\n          <Space direction=\"vertical\" size=\"large\" style={{ width: '100%' }}>\n            <Typography.Title level={3}>图标字体预览组件</Typography.Title>\n            <Typography.Paragraph>\n              FontList 组件用于展示和预览图标字体，支持调整图标大小，\n              点击图标名称可以复制使用代码。\n            </Typography.Paragraph>\n            <Card title=\"示例展示\">\n              <FontList fonts={{\n                'kne-font': {\n                  glyphs: [\n                    { font_class: 'icon-home' },\n                    { font_class: 'icon-user' },\n                    { font_class: 'icon-setting' },\n                    { font_class: 'icon-delete' },\n                    { font_class: 'icon-edit' },\n                    { font_class: 'icon-add' }\n                  ]\n                },\n                'kne-font-colorful': {\n                  glyphs: [\n                    { font_class: 'icon-star' },\n                    { font_class: 'icon-heart' },\n                    { font_class: 'icon-check' }\n                  ]\n                }\n              }} />\n            </Card>\n          </Space>\n        </InfoPage.Part>\n      </InfoPage>\n    </PureGlobal>\n  );\n});\n\nrender(<FontListExample />);\n\n"},{"title":"Highlight 代码高亮","description":"使用 Highlight 组件实现代码语法高亮显示","scope":[{"name":"_ModulesDev","packageName":"@kne/modules-dev","importStatement":"import * as _ModulesDev from \"@kne/modules-dev\""},{"name":"antd","packageName":"antd"}],"code":"const { Highlight } = _ModulesDev;\nconst { Space, Typography, Card, Input } = antd;\nconst { useState } = React;\n\nconst codeTemplate = `import React from 'react';\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <h1>Hello World</h1>\n      <p>Welcome to React</p>\n    </div>\n  );\n}\n\nexport default App;`;\n\nconst HighlightExample = () => {\n  const [code, setCode] = useState(codeTemplate);\n\n  return (\n    <Space direction=\"vertical\" size=\"large\" style={{ width: '100%' }}>\n      <Typography.Title level={3}>Highlight 代码高亮组件</Typography.Title>\n      <Typography.Paragraph>\n        Highlight 组件基于 highlight.js 实现，支持多种编程语言的语法高亮显示。\n      </Typography.Paragraph>\n      <Card title=\"代码输入\">\n        <Input.TextArea\n          value={code}\n          onChange={(e) => setCode(e.target.value)}\n          rows={8}\n          placeholder=\"输入要高亮的代码\"\n        />\n      </Card>\n      <Card title=\"高亮效果\">\n        <Highlight html={`<pre><code class=\"language-javascript hljs\">${escapeHtml(code)}</code></pre>`} />\n      </Card>\n    </Space>\n  );\n};\n\nfunction escapeHtml(text) {\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\n\nrender(<HighlightExample />);\n\n"}]}}
